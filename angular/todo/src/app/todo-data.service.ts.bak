import { Todo } from './todo';
import { ApiService } from './api.service';
import { Observable } from 'rxjs';
import { Injectable, inject } from '@angular/core';

@Injectable()
export class TodoDataService {
  private readonly _api: ApiService = inject(ApiService);

  public addTodo(todo: Todo): Observable<Todo> {
    return this._api.createTodo(todo);
  }

  public deleteTodoById(id: number): Observable<null> {
    return this._api.deleteTodoById(id);
  }

  public getAllTodos(): Observable<Todo[]> {
    return this._api.getAllTodos();
  }

  public getTodoById(id: number): Observable<Todo> {
    return this._api.getTodoById(id);
  }

  public toggleTodoComplete(todo: Todo): Observable<Todo> {
    todo.complete = !todo.complete;

    return this._api.updateTodo(todo.id, todo);
  }

  public updateTodo(todo: Todo): Observable<Todo> {
    return this._api.updateTodo(todo.id, todo);
  }
}
